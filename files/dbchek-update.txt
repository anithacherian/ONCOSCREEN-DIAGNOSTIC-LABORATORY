

keziahjene
Akeziah@3018

APPLICATION NO 17583587
DATE: 15-02-2026

Jkevin@3018

Jkevin@2023-app
from django.db.models.functions import Lower
from django.db.models import Count
from bookingplatform.models import LabTest

duplicates = (
    LabTest.objects
    .annotate(lower_name=Lower('name'))
    .values('lower_name')
    .annotate(count=Count('id'))
    .filter(count__gt=1)
)

print(duplicates)
<QuerySet [{'name': 'CEA (Carcinoembryonic Antigen)', 'count': 2}, {'name': 'LDH (Lactate Dehydrogenase)', 'count': 2}]>

from bookingplatform.models import LabPackage

for p in LabPackage.objects.all():
    print(p.id, p.price, type(p.price))

from bookingplatform.models import LabPackage, PackageCategory

category = PackageCategory.objects.get(id=1)  # use the id you tested
LabPackage.objects.filter(category=category)
LabPackage.objects.filter(category=category, is_active=True)

from bookingplatform.models import Booking 
from django.contrib.auth import get_user_model
User = get_user_model()
user = User.objects.get(username="anitha@gmail.com")
bookings = Booking.objects.filter(patient=user, status='SAMPLE COLLECTED')

Booking.objects.filter(
    status='SAMPLE COLLECTED'
).count()


